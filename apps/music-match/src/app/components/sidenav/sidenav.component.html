<mat-toolbar color="primary" class="mat-elevation-z5">
  <h3>
    <button #btnSideNavToggle mat-icon-button (click)="this.sidenav.toggle()">
      <mat-icon>menu</mat-icon></button
    >Music Match
  </h3>

  <div style="width: 100%"></div>

  <button
    mat-button
    *ngIf="currentUser$ | async as currentUser"
    [routerLink]="'/user/' + currentUser.id"
  >
    <img
      style="border-radius: 50%"
      [src]="currentUser.imageUrl"
      width="40"
      height="40"
    />

    <span>{{ currentUser.name }}</span>
  </button>
</mat-toolbar>

<mat-sidenav-container>
  <mat-sidenav #sideNav [mode]="(isHandset$ | async) ? 'over' : 'side'" opened>
    <mat-nav-list>
      <mat-list-item [routerLink]="'/home'" [routerLinkActive]="['is-active']"
        ><mat-icon>home</mat-icon> Home
      </mat-list-item>
      <mat-list-item [routerLink]="'/search'" [routerLinkActive]="['is-active']"
        ><mat-icon>search</mat-icon> Search
      </mat-list-item>

      <mat-divider></mat-divider>
      <button (click)="openPlaylistFormDialog('Create')" mat-button>
        <mat-icon>playlist_add</mat-icon> New playlist
      </button>
      <button
        *ngIf="(currentUser$ | async)?.role === 'admin'"
        (click)="openArtistFormDialog('Create')"
        mat-button
      >
        <mat-icon>person_add</mat-icon>New artist
      </button>
      <h4><mat-icon>music_note</mat-icon> Your playlists</h4>
      <mat-list-item
        *ngFor="let playlist of usersPlaylist$ | async"
        [routerLink]="'/playlist/' + playlist.id"
        [routerLinkActive]="['is-active']"
      >
        <img
          [src]="playlist.imageUrl"
          src-fallback="/assets/music-fallback.jpg"
          width="40"
          height="40"
        />
        {{ playlist.name }}
      </mat-list-item>

      <h4><mat-icon>favorite</mat-icon>Favorite playlists</h4>
      <mat-list-item
        *ngFor="let playlist of likedPlaylist$ | async"
        [routerLink]="'/playlist/' + playlist.id"
        [routerLinkActive]="['is-active']"
      >
        <img
          [src]="playlist.imageUrl"
          src-fallback="/assets/music-fallback.jpg"
          width="40"
          height="40"
        />
        {{ playlist.name }}
      </mat-list-item>

      <h4><mat-icon>group</mat-icon> Friends</h4>
      <mat-list-item
        *ngFor="let user of friends$ | async"
        [routerLink]="'/user/' + user.id"
        [routerLinkActive]="['is-active']"
      >
        <img
          [src]="user.imageUrl"
          src-fallback="/assets/music-fallback.jpg"
          width="40"
          height="40"
        />
        {{ user.name }}
      </mat-list-item>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content><router-outlet></router-outlet></mat-sidenav-content>
</mat-sidenav-container>
